<%= stylesheet_link_tag    'datatables', media: 'all' %>
<%= javascript_include_tag 'datatables' %>
<!-- page content -->
<div class="right_col" role="main">
  <div class="">
    <div class="page-title">
      <div class="title_left">
        <h3>Pedidos</h3>
      </div> 
      <div class="title_right">
      </div>          
    </div>
    <div class="clearfix"></div>
    <div class="row">
      <div class="col-md-12 col-sm-12 col-xs-12">
        <div class="x_panel">
          <div class="x_title">
            <div class="pull-right">
              <%= link_to 'Nuevo', new_ventas_pedido_path, {class: 'btn btn-success'} %> 
            </div>
            <div class="clearfix"></div>
          </div>
          <div class="x_content" style="display: block;">
            <table id="pedidos" class="table table-striped table-hover">
              <thead>
                <tr>
                  <th>Cliente/Pedido</th>                  
                </tr>
              </thead>
              <tbody>
                <% @ventas_pedidos.each do |ventas_pedido| %>
                <tr>                                  
                    <td>
                      <a href="/ventas/pedidos/<%= ventas_pedido.id %>">
                        <b>
                        <%= ventas_pedido.grupo %> / 
                        <%= ventas_pedido.email %> / 
                        <%= ventas_pedido.primer_apellido %> <%= ventas_pedido.segundo_apellido %> <%= ventas_pedido.primer_nombre %> <%= ventas_pedido.segundo_nombre %>                      
                        </b>
                      </a>
                      <ol>
                        <% ventas_pedido.rel_pedido_detalle.each do |pd| %>
                          <li><%= pd.rel_producto.nombre %></li>
                        <% end %>
                      </ol>
                    </td>
                  </tr>
                  <% end %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- /page content -->
  <script type="text/javascript">

    $(document).ready(function() {
      var handleDataTableButtons = function() {
        if ($("#pedidos").length) {
          $("#pedidos").DataTable({
            language: dataTables_spanish,
            dom: "Bfrtip",
            buttons: [
            {
              extend: "copy",
              className: "btn-sm"
            },
            {
              extend: "csv",
              className: "btn-sm"
            },
            {
              extend: "excel",
              className: "btn-sm"
            },
            {
              extend: "pdfHtml5",
              className: "btn-sm"
            },
            {
              extend: "print",
              className: "btn-sm"
            }
            ],
            responsive: true
          });
        }
      };

      TableManageButtons = function() {
        "use strict";
        return {
          init: function() {
            handleDataTableButtons();
          }
        };
      }();

      TableManageButtons.init();

    });
  </script>

